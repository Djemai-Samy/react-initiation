# ReactJS: Les composant

![Image du cours: ReactJSJ: Les composants](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/react-components.png)

Dans ce chapitre, nous allons explorer les composants ReactJS en dÃ©tail.

Les composants sont la pierre angulaire de ReactJS et vous permettent de construire des applications modulaires et rÃ©utilisables.

## Programme

[Vous pouvez suivre la serie complÃ¨te directement sur le site:](https://djemai-samy.com/posts/0.react-initiation)

1. [ReactJS: Introduction](https://djemai-samy.com/posts/1.react-introduction.article)
2. [ReactJS: Les composants](https://djemai-samy.com/posts/2.react-components.article)
3. [ReactJS: Gestion d'Ã©tats](https://djemai-samy.com/posts/3.react-states.article)
4. [ReactJS: Les hooks](https://djemai-samy.com/posts/4.react-hooks.article)
5. [ReactJS: La navigation](https://djemai-samy.com/posts/5.react-navigation.article)
6. [Tutoriel: Todo List](https://djemai-samy.com/posts/6.react-todos.article)

---

## Branches

Pour chaque article existe une branche sur le dÃ©pot pour pouvoir suivre pas Ã  pas la serie:

- [main](https://github.com/Djemai-Samy/react-initiation)
- [1-introduction](https://github.com/Djemai-Samy/react-initiation/tree/1-introduction)
- [2-components](https://github.com/Djemai-Samy/react-initiation/tree/2-components)
- [3-states](https://github.com/Djemai-Samy/react-initiation/tree/3-states)
- [4-hooks](https://github.com/Djemai-Samy/react-initiation/tree/4-hooks)
- [5-navigation](https://github.com/Djemai-Samy/react-initiation/tree/5-navigation)
- [6-todos](https://github.com/Djemai-Samy/react-initiation/tree/6-todos)

---

## DÃ©scription du chapitre

Dans ce chapitre, nous allons explorer **les composants ReactJS** en dÃ©tail. 

Les composants permettent de **construire des applications** rÃ©actives en **dÃ©coupant votre application en petits morceaux rÃ©utilisables** et **gÃ©rables sÃ©parÃ©ment**. 

Vous allez dÃ©couvrir **comment crÃ©er des composants**, les **organiser en structures** plus complexes et les **utiliser pour construire des applications rÃ©actives**.

## Objectifs

1. **Comprendre les composants** ReactJS et leur importance pour la construction d'applications rÃ©actives.
2. **Comprendre comment gÃ©rer les donnÃ©es** Ã  l'intÃ©rieur d'un composant en utilisant les props.
3. **ConnaÃ®tre les bonnes pratiques** pour la conception de composants.

---

## Composant principal

Voici la structure de dossier d'un projet React basique:

```
ðŸ“¦nom-app
â”£ ðŸ“‚node_modules
â”£ ðŸ“‚public
â”ƒ â”£ ðŸ“œfavicon.ico
â”ƒ â”— ðŸ“œindex.html
â”£ ðŸ“‚src
â”ƒ â”£ ðŸ“œApp.jsx
â”ƒ â”£ ðŸ“œindex.jsx
â”ƒ â”— ðŸ“œstyle.css
â”£ ðŸ“œ.babelrc
â”£ ðŸ“œpackage.json
â”— ðŸ“œwebpack.config.js
```

---

## App.jsx

Comme nous l'avons vu dans l'introduction Ã  ReactJS, **toute l'application est encapsulÃ©e dans un composant pricipale nommÃ©** `App.jsx`:

```jsx
function App(){
  return(
  <div>
    <header>
      <h1>Bonjour !</h1>
      <p>Je suis un paragraphe.</p>
    </header>
    <p>Je suis un paragraphe.</p>
    <p>Je suis un autre paragraphe.</p>
  </div>
  );
}
```

![RÃ©sultat d'affichage sur la page web](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/composant-principal.png)

Donc, **un composant ReactJS**, n'est rien d'autre qu'**une fonction Javascript qui retourne des Ã©lÃ©ments** HTML en utilisant la syntaxe JSX.

---

## Le JSX

**La syntaxe JSX permet** beaucoup de choses, notamment la **rÃ©utilisation d'instructions JavaScript** (lire des variables, faire des opÃ©rations et des rendus conditionnels...) dans le JSX.

Par exemple, nous pouvons **dÃ©clarer une variable locale de la fonction** de type `string`, puis de la **lire dans le JSX pour l'afficher dans la page**:

```jsx
function App(){
  //DÃ©clarer une constante locale
  const texte ="Je suis un paragraphe.";
  return(
    <div>
      <header>
        <h1>Bonjour !</h1>
        {/* Utiliser du javascript dans le JSX*/}
        <p>{texte}</p>
      </header>
      {/* Utiliser du javascript dans le JSX*/}
      <p>{texte}</p>
      <p>Je suis un autre paragraphe.</p>
    </div>
  );
}
```

Ou par exemple, **afficher quelque chose dynamiquement suivant une condition** en utilisant un **opÃ©rateur ternaire**:

```jsx
function App(){
const texte ="Je suis un paragraphe.";

//DÃ©clarer une variable locale
let isJour = true;

  return(
    <div>
      <header>
        {/* Utiliser du javascript dans le JSX*/}
        <h1>{isJour ? "Bonjour" : "Bonsoir"} !</h1>
        <p>{texte}</p>
      </header>
      <p>{texte}</p>
      <p>Je suis un autre paragraphe.</p>
    </div>
  );
}
```

---

## CrÃ©er un composant

Afin de mieux **organiser les composants**, les dÃ©veloppeurs ont tendance Ã  **exporter un seul composant par fichier**, puis Ã  les importer afin de les utiliser dans leur application.

Pour cela, nous classons nos composants par catÃ©gorie, dans un dossier souvent nommÃ© `components`. Une structure de dossier basique ressemble Ã  ceci :

```
ðŸ“¦nom-app
â”£ ðŸ“‚node_modules
â”£ ðŸ“‚public
â”ƒ â”£ ðŸ“œfavicon.ico
â”ƒ â”— ðŸ“œindex.html
â”£ ðŸ“‚src
â”ƒ â”£ ðŸ“‚components
â”ƒ â”ƒ â”— ðŸ“‚containers
â”ƒ â”ƒ â”ƒ â”— ðŸ“‚Header
â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œHeader.jsx
â”ƒ â”£ ðŸ“œApp.jsx
â”ƒ â”£ ðŸ“œindex.jsx
â”ƒ â”— ðŸ“œstyle.css
â”£ ðŸ“œ.babelrc
â”£ ðŸ“œpackage.json
â”— ðŸ“œwebpack.config.js
```

---

### DÃ©clarer un composant

**Un composant n'est rien d'autre qu'une fonction qui retourne des Ã©lÃ©ments** JSX.

Avant de pouvoir **afficher un composant React** dans votre application, il faut d'abord **le crÃ©er en dÃ©clarant une fonction qui retourne un ou plusieurs Ã©lÃ©ments** en utilisant le JSX.

```jsx
// Composant ReactJS: Une fonction qui retourne des Ã©lÃ©ments JSX
export default function Header(){
  let texte = "Je suis un paragraphe.";
  let isJour = true;
  return(
    <header>
      <h1>{isJour ? "Bonjour" : "Bonsoir"} !</h1>
      <p>{texte}</p>
    </header>
  );
}
```

---

### Utiliser un composant

Ensuite, vous pouvez **utiliser le composant** en l'**important quelque part dans votre application**, par exemple dans le composant principal `App.jsx` :

```jsx
//Import des composants
import Header from "./components/containers/Header/Header";

function App(){
  let texte = "Je suis un paragraphe.";
  return(
    <div>
      {/* Afficher un composant*/}
      <Header />
      <p>{texte}</p>
      <p>Je suis un autre paragraphe.</p>
    </div>
  );
}
```

---

### Imbriquer les composants

Pour **construire des interfaces utilisateur complexes**, nous pouvons **imbriquer des composants dans d'autres composants** pour crÃ©er la structure dÃ©sirÃ©e.

Par exemple, nous pouvons **crÃ©er un composant** nommÃ© `Texte` situÃ© dans le chemin `src/components/ui/Texte/Texte.jsx` pour **remplacer les deux paragraphes** de notre application :

```jsx
export default function Texte(){
  let texte = "Je suis un paragraphe.";
  return(
    <p>{texte}</p>
  );
}
```

Puis **l'importer et l'utiliser** dans le composant `Header`:

```jsx
import Texte from "../../ui/Texte/Texte";

export default function Header(){
  let isJour = true;
  return(
    <header>
      <h1>{isJour ? "Bonjour" : "Bonsoir"} !</h1>
      <Texte />
    </header>
  );
}
```

Et le **rÃ©-utiliser** dans le composant `App`:

```jsx
import Header from "./components/containers/Header/Header";
import Texte from "./components/ui/Texte/Texte";

function App(){
  return(
    <div>
      <Header />
      <Texte />
      <p>Je suis un autre paragraphe.</p>
    </div>
  );
}
```

Pour vous aider Ã  **vous retrouver dans le code d'une application complexe**, il est intÃ©ressant de **visualiser la structure de votre application sous forme d'arbres ou de boÃ®tes** :

![Representation graphique du DOM virtuel de ReactJS sous forme d'arbres](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/react-components-tree.svg)

![Representation graphique du DOM virtuel de ReactJS sous forme de boites](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/react-components-box-alt.svg)

---

## Styliser un composant

Pour **ajouter du styles aux composants** ReactJS, il existe 3 maniÃ¨res:

---

### 1. Fichier css

**Ajouter un style global** Ã  toute votre application.

Pour cela, vous pouvez **crÃ©er un fichier CSS** et **l'importer dans le composant principal** de votre application :

Dans le fichier `src/style.css`:

```css
* {
  margin: 0;
  padding: 0;
}

body {
  background-color: rgb(38, 38, 38);
  padding: 1em;
}

h1 {
  color: white; 
}

.texte {
  color: white;
}
```

Dans le fichier `src/App.jsx`:

```jsx
import Header from "./components/containers/Header/Header";
import Texte from "./components/ui/Texte/Texte";

// Importer le style
import './style.css'; 

function App(){
  return(
    <div>
      <Header />
      <Texte />
      <p className="texte">Je suis un autre paragraphe.</p>
    </div>
  );
}

```

Dans le fichier `src/components/ui/Texte/Texte.jsx`:

```jsx
export default function Texte(){
  let texte = "Je suis un paragraphe.";
  return(
    <p className='texte'>{texte}</p>
  );
}
```

![Resultat afichage sur la page web apres avoir modifiÃ© le style du composant ReactJS](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/react-components-css-style.png)

---

### 2. Module css

Il est aussi possible d'**ajouter du style Ã  un composant de maniÃ¨re isolÃ©e**.

Cela signifie que **les styles dÃ©finis dans un module CSS ne s'appliqueront qu'au composant** pour lequel ils ont Ã©tÃ© dÃ©finis et **ne seront pas transmis Ã  d'autres composants**.

Cela permet de **rendre votre code encore plus modulaire**.

Pour crÃ©er un module CSS, il suffit de **nommer le fichier CSS** en suivant ce pattern : `NomDuFichier.module.css`.

Dans le fichier `src/components/containers/Header/Header.module.css`:

```css
.container{
  border: 1px solid gray;
  border-radius: 5px;
  }

.texte{
  font-size: 1.2em;
}
```

Puis d'importer les classes crÃ©Ã©es dans le composant `src/components/containers/Header/Header.module.jsx`:

```jsx
import Texte from "../../ui/Texte/Texte";

//Import des classes dans un objet
import classes from "./Header.module.css";

export default function Header() {
  let isJour = true;
  return (
    <header className={classes.container}>
      <h1 className={classes.texte}>
        {isJour ? "Bonjour" : "Bonsoir"} !
      </h1>
      <Texte />
    </header>
  );
}
```

![Resultat affichage apres avoir changÃ© le style du composant ReactJS en utilisant les modules css](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/react-components-css-module.png)

Lors de la **compilation du code par Babel**, les fichiers de **module CSS seront compilÃ©s en un seul fichier CSS**.

**Chaque classe** d'un module CSS **aura un identifiant unique** afin de ne pas affecter les autres composants de l'application.

`classes` est donc **un objet JavaScript** dont **les clÃ©s sont les classes** que nous avons crÃ©Ã©es, et leurs **valeurs sont les identifiants uniques**.

---

### 3. En ligne

**Le style en ligne ou le inline style** est un moyen de **dÃ©finir des styles directement sur un Ã©lÃ©ment** HTML dans un composant React, sans utiliser de fichier CSS externe. 

Les **styles en ligne** peuvent Ãªtre **dÃ©finis** en utilisant **la propriÃ©tÃ© `style`** sur un Ã©lÃ©ment HTML.

**La propriÃ©tÃ© style prend un objet JavaScript** qui **contient les styles dÃ©finis** sous forme de **clÃ©s et de valeurs**.

```jsx
import Texte from "../../ui/Texte/Texte";

//Import des classes dans un objet
import classes from "./Header.module.css";

export default function Header() {
  let isJour = true;
  return (
    <header className={classes.container}>
      <h1 
        className={classes.texte}
        style={{padding: "1em", fontWeight: "bold"}}
      >
        {isJour ? "Bonjour" : "Bonsoir"} !
      </h1>
      <Texte />
    </header>
  );
}
```

Ici, nous dÃ©finissons les styles en ligne sur notre Ã©lÃ©ment `h1`. 

**Les styles en ligne** peuvent Ãªtre trÃ¨s utiles pour **des styles rapides et occasionnels**, mais pour des styles plus complexes et rÃ©utilisables, il est gÃ©nÃ©ralement prÃ©fÃ©rable d'utiliser des fichiers CSS sÃ©parÃ©s avec des modules CSS. 

Cependant, **les styles en ligne** peuvent Ãªtre trÃ¨s pratiques lorsque vous souhaitez **dynamiquement modifier des styles en fonction des donnÃ©es** ou des Ã©tats dans votre application.

Par exemple, modifier dynamiquement la couleur du `h1` suivant la valeur de la variable `isJour`:

```jsx
import Texte from "../../ui/Texte/Texte";

//Import des classes dans un objet
import classes from "./Header.module.css";

export default function Header() {
  let isJour = true;
  return (
    <header className={classes.container}>
      <h1 
        className={classes.texte}
        style={{
        padding: "1em", 
        fontWeight: "bold",
        color: isJour ? "royalblue" : "orange"
        }}
      >
        {isJour ? "Bonjour" : "Bonsoir"} !
      </h1>
      <Texte />
    </header>
  );
}
```

---

## ParamÃ¨trer un composant

Pour l'instant, notre **composant Texte n'est pas trÃ¨s rÃ©utilisable** car il affiche toujours la mÃªme chose.

Ã‰tant donnÃ© que **les composants React ne sont que des fonctions**, nous pouvons **envoyer des paramÃ¨tres Ã  cette fonction** pour rendre notre composant plus dynamique.

Avec JSX, nous pouvons **envoyer un objet en paramÃ¨tre Ã  la fonction** en utilisant une syntaxe semblable Ã  celle qui permet d'**ajouter des attributs Ã  un Ã©lÃ©ment HTML**.

Dans le composant `App.js`, nous allons envoyer les propriÃ©tÃ©s de cette maniÃ¨re:

```JavaScript
import Header from "./components/containers/Header/Header";
import Texte from "./components/ui/Texte/Texte";
import './style.css'; //Import du style globale

function App(){
  return(
    <div>
      <Header />
      <Texte color="green" bold={true}>Je suis un paragraphe.</Texte>
      <Texte color="red" bold={false}>Je suis un autre paragraphe.</Texte>
    </div>
  );
}
```

Puis, dans le composant `Texte`, **la fonction reÃ§oit maintenant un objet** contenant les donnÃ©es sous forme de clÃ©s et de valeurs.

```JavaScript
// Composant paramÃ©trÃ© recevant un objet
export default function Texte(props) {
  return (
    <p
      className="texte"
      style={{
      //Utilisation des props pour dÃ©finir le style
      color: props.color,
      fontWeight: props.bold ? "bold" : "default",
      }}
    >
      {/* Utiliser children pour afficher le texte*/}
      {props.children}
    </p>
  );
}
```
![RÃ©sultat affichage apres avoir envoyÃ© des paramÃ¨tre a un composant ReactJS.](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/react-components-props-code.png)

![Representation graphique des props: propriÃ©tÃ©s envoyer dnas les composant ReactJS](https://djemai-samy.com/blog/2.programmation/1.web/react/react-initiation/react-components/react-components-props.svg)

---

## Les Ã©vÃ©nements

Lors de la crÃ©ation d'une application ReactJS, il est souvent nÃ©cessaire d'**ajouter des Ã©vÃ©nements Ã  des Ã©lÃ©ments JSX**, comme des boutons, des formulaires, ou d'autres Ã©lÃ©ments interactifs. 

En ReactJS, cela se fait en utilisant la syntaxe JSX pour **ajouter des attributs d'Ã©vÃ©nement Ã  des Ã©lÃ©ments**.

### Ajouter un Ã©vÃ©nement avec JSX

On peut **ajouter un attribut d'Ã©vÃ©nement Ã  un Ã©lÃ©ment** en utilisant la syntaxe suivante :

```js
<element event={fonction} />
```

- `element` est l'**Ã©lÃ©ment JSX auquel on veut ajouter un Ã©vÃ©nement**.
- `event` est **le nom de l'Ã©vÃ©nement** (comme `onClick` ou `onChange`).
- `function` est la **fonction de gestion de l'Ã©vÃ©nement** que l'on veut **appeler lorsque l'Ã©vÃ©nement est dÃ©clenchÃ©**.

### Exemple: Clique

Voyons maintenant comment cela fonctionne dans la pratique. 

Imaginons que nous ayons **un bouton auquel nous voulons ajouter un Ã©vÃ©nement qui executera une fonction** lors d'un clique :

```JavaScript
function App(){

  // 1. Fonction Ã  executer lors du clique
  function handleClick(){
  alert('Evnement clique dÃ©clanchÃ©!')
  }

  return(
    <div>
      <Header />
      <Texte color="green" bold={true}>Je suis un paragraphe.</Texte>
      <Texte color="gray" bold={false}>Je suis un autre paragraphe.</Texte>

      {/* 2. Lier la fonction avec le gestionnaire d'Ã©vÃ©nement*/}
      <button onClick={handleClick}>Cliquez ici</button>
    </div>
  );
}
```

Ici, nous avons **utilisÃ© l'attribut** `onClick` pour **ajouter un Ã©vÃ©nement de clic au bouton**, et nous avons **dÃ©fini la fonction de gestion d'Ã©vÃ©nement** `handleClick` qui sera **appelÃ©e lorsque le bouton est cliquÃ©**.

Voici une liste des Ã©vÃ©nements les plus couramment utilisÃ©s en ReactJS:

- `onChange` : Cet Ã©vÃ©nement est **dÃ©clenchÃ© lorsqu'une valeur est modifiÃ©e dans un champ de formulaire**. Il est souvent **utilisÃ© pour les champs de texte, les cases Ã  cocher et les boutons radio**.

- `onSubmit` : Cet Ã©vÃ©nement est **dÃ©clenchÃ© lorsqu'un formulaire est soumis**. Il est souvent **utilisÃ© pour valider les donnÃ©es de formulaire** et **envoyer des requÃªtes Ã  un serveur**.

- `onMouseOver` : Cet Ã©vÃ©nement est **dÃ©clenchÃ© lorsqu'un Ã©lÃ©ment est survolÃ© avec la souri**s. Il est souvent **utilisÃ© pour afficher des informations supplÃ©mentaires** ou des aperÃ§us de contenu.

- `onFocus` : Cet Ã©vÃ©nement est **dÃ©clenchÃ© lorsqu'un Ã©lÃ©ment reÃ§oit le focus**. Il est souvent **utilisÃ© pour gÃ©rer le comportement de navigation** et **d'accessibilitÃ©**.

- `onBlur` : Cet Ã©vÃ©nement est **dÃ©clenchÃ© lorsqu'un Ã©lÃ©ment perd le focus**. Il est souvent **utilisÃ© pour valider les donnÃ©es de formulaire** et **pour masquer les Ã©lÃ©ments de contrÃ´le** lorsqu'ils ne sont plus nÃ©cessaires.

- `onKeyDown` et `onKeyUp` : Ces Ã©vÃ©nements sont **dÃ©clenchÃ©s lorsqu'une touche du clavier est enfoncÃ©e ou relÃ¢chÃ©e**. Ils sont souvent **utilisÃ©s pour contrÃ´ler le comportement de la saisie de texte** et **des interactions utilisateur**.

- `onScroll` : Cet Ã©vÃ©nement est **dÃ©clenchÃ© lorsqu'un Ã©lÃ©ment dÃ©file**. Il est souvent **utilisÃ© pour les Ã©lÃ©ments de navigation**, **les barres de dÃ©filement** et **les listes de contenu**.

---

## Conclusion

Ce chapitre nous a permis d'**explorer les composants ReactJ**S que nous pouvons **utiliser pour crÃ©er notre application**. 

Nous avons vu que **les composants ne sont que des fonctions** simples et les rapides Ã  crÃ©er.

Et que grÃ ce Ã  la syntaxe JSX, il est facile d'**effectuer des opÃ©rations en Javascript** pour afficher des variables, faire des rendus conditionnels...

La syntaxe JSX nous permet aussi de facilement **envoyer des donnÃ©es aux composants** pour les paramÃ©trer et **d'ajouter des Ã©vÃ©nements et des attributs**.

Dans le prochain chapitre, nous allons voire comment **gÃ©rer et manipuler le ou les Ã©tats de notre application**.

---

## Aller plus loin

  [ReactJS: La gestion d'Ã©tats](https://djemai-samy.com/posts/3.react-states.article)
